global:
  resolve_timeout: 5m

route:
  receiver: "slack-warning"
  group_by: ["alertname", "namespace"]
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 4h

  routes:
    # ðŸ”´ Critical alerts
    - matchers:
        - severity="critical"
      receiver: "slack-critical"
      repeat_interval: 1h

    # ðŸŸ¡ Warning alerts
    - matchers:
        - severity="warning"
      receiver: "slack-warning"

    # ðŸ”‡ Silence noisy kube-system alerts
    - matchers:
        - namespace="kube-system"
      receiver: "null"

receivers:
  - name: "slack-warning"
    slack_configs:
      - channel: "#alerts-warning"
        send_resolved: true
        title: ":warning: {{ .CommonAnnotations.summary }}"
        text: |
          *Alert:* {{ .CommonLabels.alertname }}
          *Namespace:* {{ .CommonLabels.namespace }}
          *Severity:* {{ .CommonLabels.severity }}
          *Description:* {{ .CommonAnnotations.description }}

  - name: "slack-critical"
    slack_configs:
      - channel: "#alerts-critical"
        send_resolved: true
        title: ":rotating_light: {{ .CommonAnnotations.summary }}"
        text: |
          *ðŸ”¥ CRITICAL ALERT ðŸ”¥*
          *Alert:* {{ .CommonLabels.alertname }}
          *Namespace:* {{ .CommonLabels.namespace }}
          *Severity:* {{ .CommonLabels.severity }}
          *Description:* {{ .CommonAnnotations.description }}

  - name: "null"
